load("@io_bazel_rules_go//go:def.bzl", "go_library", "go_test")

go_library(
    name = "parser",
    srcs = [
        "comment.go",
        "emptyStatement.go",
        "enum.go",
        "error.go",
        "extend.go",
        "extensions.go",
        "field.go",
        "groupField.go",
        "import.go",
        "inlineComment.go",
        "mapField.go",
        "message.go",
        "oneof.go",
        "option.go",
        "package.go",
        "parser.go",
        "proto.go",
        "reserved.go",
        "service.go",
        "syntax.go",
        "visitee.go",
        "visitor.go",
    ],
    importpath = "github.com/yoheimuta/go-protoparser/v4/parser",
    visibility = ["//visibility:public"],
    deps = [
        "//lexer",
        "//lexer/scanner",
        "//parser/meta",
    ],
)

go_test(
    name = "parser_test",
    srcs = [
        "comment_test.go",
        "enum_test.go",
        "extend_test.go",
        "extensions_test.go",
        "field_test.go",
        "groupField_test.go",
        "import_test.go",
        "inlineComment_test.go",
        "mapField_test.go",
        "message_test.go",
        "oneof_test.go",
        "option_test.go",
        "package_test.go",
        "proto_accept_test.go",
        "proto_test.go",
        "reserved_test.go",
        "service_test.go",
        "syntax_test.go",
    ],
    deps = [
        ":parser",
        "//internal/util_test",
        "//lexer",
        "//parser/meta",
    ],
)
